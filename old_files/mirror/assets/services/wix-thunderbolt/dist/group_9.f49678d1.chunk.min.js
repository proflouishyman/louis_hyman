(self.webpackJsonp__wix_thunderbolt_app=self.webpackJsonp__wix_thunderbolt_app||[]).push([[1232],{10145:(e,t)=>{!function(e){"use strict";e.stringify=function e(t){function a(e){return/[^\w-.]/.test(e)?e.replace(/[^\w-.]/g,function(e){return"$"===e?"!":(e=e.charCodeAt(0))<256?"*"+("00"+e.toString(16)).slice(-2):"**"+("0000"+e.toString(16)).slice(-4)}):e}var i;switch(typeof t){case"number":return isFinite(t)?"~"+t:"~null";case"boolean":return"~"+t;case"string":return"~'"+a(t);case"object":if(!t)return"~null";if(i=[],Array.isArray(t)){for(var o=0;o<t.length;o++)i[o]=e(t[o])||"~null";return"~("+(i.join("")||"~")+")"}for(var s in t)if(t.hasOwnProperty(s)){var n=e(t[s]);n&&i.push(a(s)+n)}return"~("+i.join("~")+")";default:return}};var t={true:!0,false:!1,null:null};e.parse=function(e){if(!e)return e;e=e.replace(/%(25)*27/g,"'");var a=0,i=e.length;function o(t){if(e.charAt(a)!==t)throw new Error("bad JSURL syntax: expected "+t+", got "+(e&&e.charAt(a)));a++}function s(){for(var t,o=a,s="";a<i&&"~"!==(t=e.charAt(a))&&")"!==t;)switch(t){case"*":o<a&&(s+=e.substring(o,a)),"*"===e.charAt(a+1)?(s+=String.fromCharCode(parseInt(e.substring(a+2,a+6),16)),o=a+=6):(s+=String.fromCharCode(parseInt(e.substring(a+1,a+3),16)),o=a+=3);break;case"!":o<a&&(s+=e.substring(o,a)),s+="$",o=++a;break;default:a++}return s+e.substring(o,a)}return function n(){var r,c,l;switch(o("~"),c=e.charAt(a)){case"(":if(a++,"~"===e.charAt(a))if(r=[],")"===e.charAt(a+1))a++;else do{r.push(n())}while("~"===e.charAt(a));else if(r={},")"!==e.charAt(a))do{r[s()]=n()}while("~"===e.charAt(a)&&++a);o(")");break;case"'":a++,r=s();break;default:for(l=a++;a<i&&/[^)~]/.test(e.charAt(a));)a++;var d=e.substring(l,a);if(/[\d\-]/.test(c))r=parseFloat(d);else if(void 0===(r=t[d]))throw new Error("bad value keyword: "+d)}return r}()},e.tryParse=function(t,a){try{return e.parse(t)}catch(e){return a}}}(t)},45189:(e,t,a)=>{e.exports=a(10145)},72610:(e,t,a)=>{"use strict";a.r(t),a.d(t,{AUTH_RESULT_REASON:()=>y.qd,BIEvents:()=>U,INTERACTIONS:()=>y.sH,PrivacyStatus:()=>fe.lS,PrivacyStatusStatus:()=>I,Role:()=>N,SiteMembersApiSymbol:()=>v.Np,Status:()=>R,TpaPage:()=>O,getCaptchaSettings:()=>T.YG,isLoginAcceptableError:()=>T.qi,isSignupAcceptableError:()=>T.NU,memberDetailsFromDTO:()=>T.Yv,page:()=>Ze,site:()=>Qe});var i=a(77748),o=a(20590),s=a(32777),n=a(32166),r=a(87711),c=a(6623),l=a(9492),d=a(75396),u=a(10553),g=a(79435),m=a(39063),p=a(82658),h=a(46745),S=a(63386),E=a(71085),w=a(73896),P=a(45117),C=a(45156),b=a(45189),f=a.n(b);var D=a(62155),y=a(66397),v=a(19889);class _{constructor(e,t,a,i,o){this.propsStore=e,this.structureApi=t,this.siteScrollBlocker=a,this.browserWindow=i,this.cyclicTabbing=o,this.prevCompIds=[]}async displayDialog(e,t,a,i){(0,p.fU)(this.browserWindow)||(this.activeElementBeforeShowDialog=this.browserWindow.document.activeElement);const o=(0,D.uniqueId)(v.RG);this.propsStore.update({[o]:{...t,...a}}),this.currentCompId&&this.cyclicTabbing.disableCyclicTabbing(this.currentCompId),this.cyclicTabbing.enableCyclicTabbing(o),await this.structureApi.addComponentToDynamicStructure(o,{componentType:e,components:[]}),this.currentCompId&&(i?this.prevCompIds.push(this.currentCompId):(this.structureApi.removeComponentFromDynamicStructure(this.currentCompId),this.siteScrollBlocker.setSiteScrollingBlocked(!1,this.currentCompId))),this.siteScrollBlocker.setSiteScrollingBlocked(!0,o),this.currentCompId=o}hideDialog(e){if(this.currentCompId){if(this.removeComponentFromDynamicStructure(this.currentCompId),e)for(;this.prevCompIds.length>0;)this.removeComponentFromDynamicStructure(this.prevCompIds.pop());this.currentCompId=this.prevCompIds.pop()}(0,p.fU)(this.browserWindow)||(this.activeElementBeforeShowDialog?.focus(),this.activeElementBeforeShowDialog=null)}removeComponentFromDynamicStructure(e){this.structureApi.removeComponentFromDynamicStructure(e),this.siteScrollBlocker.setSiteScrollingBlocked(!1,e),this.cyclicTabbing.disableCyclicTabbing(e)}}const A={get:(e,t,a,i,o)=>new _(e,t,a,i,o)};var I,R,N,O;!function(e){e.UNKNOWN="UNKNOWN",e.PRIVATE="PRIVATE",e.PUBLIC="PUBLIC"}(I||(I={})),function(e){e.UNKNOWN="UNKNOWN",e.PENDING="PENDING",e.APPROVED="APPROVED",e.BLOCKED="BLOCKED",e.OFFLINE="OFFLINE"}(R||(R={})),function(e){e.UNDEFINED_ROLE="UNDEFINED_ROLE",e.MEMBER="MEMBER",e.OWNER="OWNER",e.CONTRIBUTOR="CONTRIBUTOR"}(N||(N={})),function(e){e.EXPIRED_RESET_LINK="EXPIRED_RESET_LINK",e.ADMIN_APPROVAL="ADMIN_APPROVAL",e.NO_PERMISSIONS="NO_PERMISSIONS",e.LOGIN="LOGIN",e.FORGOT_PASSWORD="FORGOT_PASSWORD",e.RESET_PASSWORD="RESET_PASSWORD",e.EMAIL_CONFIRMATION="EMAIL_CONFIRMATION"}(O||(O={}));var T=a(65788),L=a(8145),k=a(98323);const U=({sessionManager:e,businessLogger:t,wixBiSession:a,viewMode:i,language:o})=>{const s=(t,s)=>({biToken:a.msId,context:t,ts:M(a),viewmode:i,visitor_id:e.getVisitorId(),site_member_id:e.getSiteMemberId(),vsi:a.viewerSessionId,site_settings_lng:o.siteLanguage,browser_lng:o.userLanguage,lng_mismatch:o.siteLanguage!==o.userLanguage,layout:s});return{loginOrSignUpDialogLoaded:(e,a="fullscreen")=>{t.logger.log({src:5,evid:658,...s(e,a)},{endpoint:"site-members"})},closingDialog:(e,a="fullscreen")=>{t.logger.log({src:5,evid:602,form_type:"default",...s(e,a)},{endpoint:"site-members"})},emailAuthSubmitClicked:(e,a)=>{t.logger.log({src:5,evid:603,form_type:"default",...s(e,a)},{endpoint:"site-members"})},siteMembersFeatureLoaded:()=>{t.logger.log({src:5,evid:698,...s()},{endpoint:"site-members"})},siteMembersSdkFeatureLoaded:()=>{t.logger.log({src:5,evid:699,...s()},{endpoint:"site-members"})},siteMembersEmailConfirmationNewMembersModalLoad:()=>{t.logger.log({src:5,evid:1809,...s()},{endpoint:"site-members"})},siteMembersEmailConfirmationSendCodeClick:()=>{t.logger.log({src:5,evid:1810,...s()},{endpoint:"site-members"})},siteMembersEmailConfirmationOnResendCodeClick:()=>{t.logger.log({src:5,evid:1811,...s()},{endpoint:"site-members"})},cachePrediction:()=>{t.logger.log({src:5,evid:1726,...s()},{endpoint:"site-members"})}}},M=e=>{const t=e.initialTimestamp||0;return Date.now()-t},V={isCloseable:!0,returnPages:!1};class B{constructor(e,t){this.shouldRunCustomPopupCloseCallback=!0,this.popups=e,this.onReset=t,this.config=V}async openPopupPage(e,t){const a=this.shouldRunCustomPopupCloseCallback;this.preventCustomPopupCloseCallback(),await(this.popups?.open(e,()=>{this.shouldRunCustomPopupCloseCallback&&(this.rejectAuthenticationRequest(),t&&t())})),this.shouldRunCustomPopupCloseCallback=a}preventCustomPopupCloseCallback(){this.shouldRunCustomPopupCloseCallback=!1}allowCustomPopupCloseCallback(){this.shouldRunCustomPopupCloseCallback=!0}assignRequestAuthenticationRejection(e){this.requestAuthenticationRejectInstance=this.requestAuthenticationRejectInstance||e}assignRequestAuthenticationResolveInstance(e){this.requestAuthenticationResolveInstance=this.requestAuthenticationResolveInstance||e}assignRequestAuthenticationPromise(e,t){this.requestAuthenticationRejectInstance=this.requestAuthenticationRejectInstance||t,this.requestAuthenticationResolveInstance=this.requestAuthenticationResolveInstance||e}rejectAuthenticationRequest(){this.requestAuthenticationRejectInstance&&(this.requestAuthenticationRejectInstance(y.qd.CANCELED),this.reset())}resolveAuthenticationRequest(e){this.requestAuthenticationRejectInstance&&(this.requestAuthenticationResolveInstance(e),this.reset())}setConfig({isCloseable:e=!0,returnPages:t=!1}){this.config={isCloseable:e,returnPages:t}}reset(){this.onReset?.(),this.requestAuthenticationRejectInstance=void 0,this.requestAuthenticationResolveInstance=void 0,this.config=V}}var F,q,$,W,x,G,H,j=a(4387),K=a(73699),J={},z={memberPrivacySettings:"_memberPrivacySettings"},Y={updatedDate:"google.protobuf.Timestamp"};function X(e){return(0,j.O2)(Object.assign(e,{domainToMappings:{"editor.wixapps.net":[{srcPath:"/_api/members/v1/privacy-settings",destPath:"/v1/privacy-settings"}],"api._api_base_domain_":[{srcPath:"/members/v1/privacy-settings",destPath:""}],"manage._base_domain_":[{srcPath:"/_api/members/v1/privacy-settings",destPath:"/v1/privacy-settings"}],"editor._base_domain_":[{srcPath:"/_api/members/v1/privacy-settings",destPath:"/v1/privacy-settings"}],"blocks._base_domain_":[{srcPath:"/_api/members/v1/privacy-settings",destPath:"/v1/privacy-settings"}],"create.editorx":[{srcPath:"/_api/members/v1/privacy-settings",destPath:"/v1/privacy-settings"}],"www.wixapis.com":[{srcPath:"/members/v1/privacy-settings",destPath:"/v1/privacy-settings"}],_:[{srcPath:"/_api/members/v1/privacy-settings",destPath:"/v1/privacy-settings"}],"www._base_domain_":[{srcPath:"/_api/members/v1/privacy-settings",destPath:"/v1/privacy-settings"}],"*.dev.wix-code.com":[{srcPath:"/_api/members/v1/privacy-settings",destPath:"/v1/privacy-settings"}],"bo._base_domain_":[{srcPath:"/_api/members/v1/privacy-settings",destPath:"/v1/privacy-settings"}],"wixbo.ai":[{srcPath:"/_api/members/v1/privacy-settings",destPath:"/v1/privacy-settings"}],"apps._base_domain_":[{srcPath:"/_api/members/v1/privacy-settings",destPath:"/v1/privacy-settings"}]}}))}!function(e){e.UNKNOWN="UNKNOWN",e.VISIBLE_TO_MEMBERS_ONLY="VISIBLE_TO_MEMBERS_ONLY",e.VISIBLE_TO_ALL="VISIBLE_TO_ALL"}(F||(F={})),function(e){e.UNKNOWN="UNKNOWN",e.NO_ONE="NO_ONE",e.ANYONE="ANYONE"}(q||(q={})),function(e){e.UNKNOWN="UNKNOWN",e.ENABLED="ENABLED",e.DISABLED="DISABLED",e.PENDING="PENDING",e.DEMO="DEMO"}($||($={})),function(e){e.OTHER="OTHER",e.FROM_TEMPLATE="FROM_TEMPLATE",e.DUPLICATE_BY_SITE_TRANSFER="DUPLICATE_BY_SITE_TRANSFER",e.DUPLICATE="DUPLICATE",e.OLD_SITE_TRANSFER="OLD_SITE_TRANSFER",e.FLASH="FLASH"}(W||(W={})),function(e){e.UNKNOWN_NAMESPACE="UNKNOWN_NAMESPACE",e.WIX="WIX",e.SHOUT_OUT="SHOUT_OUT",e.ALBUMS="ALBUMS",e.WIX_STORES_TEST_DRIVE="WIX_STORES_TEST_DRIVE",e.HOTELS="HOTELS",e.CLUBS="CLUBS",e.ONBOARDING_DRAFT="ONBOARDING_DRAFT",e.DEV_SITE="DEV_SITE",e.LOGOS="LOGOS",e.VIDEO_MAKER="VIDEO_MAKER",e.PARTNER_DASHBOARD="PARTNER_DASHBOARD",e.DEV_CENTER_COMPANY="DEV_CENTER_COMPANY",e.HTML_DRAFT="HTML_DRAFT",e.SITELESS_BUSINESS="SITELESS_BUSINESS",e.CREATOR_ECONOMY="CREATOR_ECONOMY",e.DASHBOARD_FIRST="DASHBOARD_FIRST",e.ANYWHERE="ANYWHERE",e.HEADLESS="HEADLESS",e.ACCOUNT_MASTER_CMS="ACCOUNT_MASTER_CMS",e.RISE="RISE",e.BRANDED_FIRST="BRANDED_FIRST"}(x||(x={})),function(e){e.UNKNOWN="UNKNOWN",e.TRASH="TRASH",e.DELETED="DELETED",e.PENDING_PURGE="PENDING_PURGE"}(G||(G={})),function(e){e.UNKNOWN="UNKNOWN",e.ANONYMOUS_VISITOR="ANONYMOUS_VISITOR",e.MEMBER="MEMBER",e.WIX_USER="WIX_USER",e.APP="APP"}(H||(H={}));const Q=e=>{const t=e.joinCommunityCheckedByDefault??!0,a=e.privacyNoteType??"CHECKBOX";return t?a:"CHECKBOX"},Z=e=>"NOTE"===Q(e)||(e.joinCommunityCheckedByDefault??!0),ee=async(e,t)=>{const{data:a}=await e.request(function(e){var t=(0,K.d)(J,{}),a=t.toJSON,i=t.fromJSON,o=(0,K.d)(z,{_memberPrivacySettings:Y}).fromJSON;function s(t){var i=t.host,s=a(e);return{entityFqdn:"wix.members.v1.member_privacy_settings",method:"GET",methodFqn:"com.wixpress.members.memberprivacysettings.MemberPrivacySettingsService.GetMemberPrivacySettings",url:X({protoPath:"/v1/privacy-settings",data:s,host:i}),params:(0,j.bU)(s),transformResponse:o}}return s.fromReq=i,s.__isAmbassador=!0,s}({}),{signedInstance:t});return a.memberPrivacySettings},te={[R.APPROVED]:"ACTIVE",[R.PENDING]:"PENDING"},ae=({member:e,role:t})=>{return{id:e?.id??"",contactId:e?.contactId??"",loginEmail:e?.loginEmail??"",imageUrl:e?.profile?.photo?.url??"",nickname:e?.profile?.nickname??"",profilePrivacyStatus:e?.privacyStatus??"",slug:e?.profile?.slug??"",status:(i=e?.status,i?te[i]??"APPLICANT":"APPLICANT"),creationDate:e?.createdDate??"",lastUpdateDate:e?.updatedDate??"",lastLoginDate:e?.lastLoginDate??"",emailVerified:e?.loginEmailVerified??!1,role:t??"MEMBER",owner:t===N.OWNER,firstName:e?.contact?.firstName??"",lastName:e?.contact?.lastName??"",memberName:(a=e?.contact,`${a?.firstName??""} ${a?.lastName??""}`.trim()),groups:void 0,emails:void 0,phones:void 0,addresses:void 0,labels:void 0,customFields:void 0};var a,i};var ie=a(65064),oe={numValue:"DOUBLE",dateValue:"google.protobuf.Timestamp",listValue:"_commonListValue",mapValue:"_commonMapValue"},se={value:"_commonCustomValue"},ne={value:"Map#_commonCustomValue"},re={value:"_customValue"},ce={numValue:"DOUBLE",dateValue:"google.protobuf.Timestamp",listValue:"_listValue",mapValue:"_mapValue"},le={createdDate:"google.protobuf.Timestamp",updatedDate:"google.protobuf.Timestamp",identityProfile:"_identityProfile"},de={customFields:"_customField"},ue={value:"_customValue"},ge={},me={},pe={value:"Map#_customValue"},he={body:"BYTES"},Se={profile:"_identityProfile"},Ee={identity:"_identity",additionalData:"Map#_commonCustomValue"};function we(e){return(0,j.O2)(Object.assign(e,{domainToMappings:{_:[{srcPath:"/_api/iam/authentication",destPath:""}],"users._base_domain_":[{srcPath:"/iam/wix/google",destPath:"/v1/sso/callback/root/0e6a50f5-b523-4e29-990d-f37fa2ffdd69"},{srcPath:"/authentication",destPath:""}],"www.wixapis.com":[{srcPath:"/_api/iam/authentication",destPath:""}],"bo._base_domain_":[{srcPath:"/_api/iam/authentication",destPath:""}],"wixbo.ai":[{srcPath:"/_api/iam/authentication",destPath:""}],"dev._base_domain_":[{srcPath:"/_api/iam/authentication",destPath:""}],"manage._base_domain_":[{srcPath:"/_api/authentication",destPath:""}],"www._base_domain_":[{srcPath:"/_api/iam/authentication",destPath:""}]}}))}var Pe={},Ce={body:"BYTES"};function be(e){return(0,j.O2)(Object.assign(e,{domainToMappings:{"manage._base_domain_":[{srcPath:"/_api/cookie",destPath:""}],_:[{srcPath:"/_api/iam/cookie",destPath:""}],"bo._base_domain_":[{srcPath:"/_api/iam/cookie",destPath:""}],"wixbo.ai":[{srcPath:"/_api/iam/cookie",destPath:""}],"www._base_domain_":[{srcPath:"/_api/iam/cookie",destPath:""}],"dev._base_domain_":[{srcPath:"/_api/iam/cookie",destPath:""}]}}))}var fe=a(82884),De={numValue:"DOUBLE",dateValue:"google.protobuf.Timestamp",listValue:"_commonListValue",mapValue:"_commonMapValue"},ye={value:"_commonCustomValue"},ve={value:"Map#_commonCustomValue"},_e={value:"_customValue"},Ae={numValue:"DOUBLE",dateValue:"google.protobuf.Timestamp",listValue:"_listValue",mapValue:"_mapValue"},Ie={createdDate:"google.protobuf.Timestamp",updatedDate:"google.protobuf.Timestamp",identityProfile:"_identityProfile"},Re={customFields:"_customField"},Ne={value:"_customValue"},Oe={value:"Map#_customValue"},Te={identity:"_identity",additionalData:"Map#_commonCustomValue"},Le={};function ke(e){return(0,j.O2)(Object.assign(e,{domainToMappings:{"www.wixapis.com":[{srcPath:"/_api/iam/verification",destPath:""}],_:[{srcPath:"/_api/iam/verification",destPath:""}],"www._base_domain_":[{srcPath:"/_api/iam/verification",destPath:""}]}}))}function Ue(e){var t=(0,K.d)(Le,{}),a=t.toJSON,i=t.fromJSON,o=(0,K.d)(Te,{_commonCustomValue:De,_commonListValue:ye,_commonMapValue:ve,_customField:_e,_customValue:Ae,_identity:Ie,_identityProfile:Re,_listValue:Ne,_mapValue:Oe}).fromJSON;function s(t){var i=t.host,s=a(e);return{entityFqdn:"wix.iam.verification.v1.start_response",method:"POST",methodFqn:"wix.iam.verification.v1.VerificationService.VerifyDuringAuthentication",url:ke({protoPath:"/v1/auth/verify",data:s,host:i}),data:s,transformResponse:o}}return s.fromReq=i,s.__isAmbassador=!0,s}var Me=a(93425);const Ve=e=>new Promise(async(t,a)=>{const i=window.crypto.randomUUID(),o=await window.crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"]),s=Be(new Uint8Array(await window.crypto.subtle.exportKey("raw",o))),n=new BroadcastChannel(`wix-idp-${i}`);n.addEventListener("message",async e=>{const{data:i}=e,{iv:s,data:r}=i,c=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:s},o,r),l=JSON.parse((new TextDecoder).decode(c));l.error?a(l.error):t(JSON.parse(l.response)),n.postMessage(await Fe(o)),n.close()});const r=qe(e,i,s);window.open(r,"oauthPopup","width=450,height=522")}),Be=e=>btoa(Array(e.length).fill("").map((t,a)=>String.fromCharCode(e[a])).join("")),Fe=async e=>{const t=window.crypto.getRandomValues(new Uint8Array(12));return{iv:t,data:await window.crypto.subtle.encrypt({name:"AES-GCM",iv:t},e,(new TextEncoder).encode("close"))}},qe=(e,t,a)=>{const i=$e({sessionId:t,encryptionKey:a});try{const t=new URL(e);return We(t,i)}catch{return`${e}&${i.toString()}`}},$e=e=>{const t=new URLSearchParams;for(const a in e)e.hasOwnProperty(a)&&t.append(a,e[a].toString());return t},We=(e,t)=>{const a=e.searchParams;for(const[e,i]of t)a.append(e,i);return e.toString()},xe=e=>e?"PUBLIC":"PRIVATE",Ge=(e,t,a)=>{document.cookie=`${e}=;max-age=0`,document.cookie=`${e}=;max-age=0;path=${t}`,document.cookie=`${e}=;domain=${a};max-age=0`,document.cookie=`${e}=;domain=${a};max-age=0;path=${t}`},He=(0,i.Og)([(0,i.KT)(o.YG,v.UU),(0,i.KT)(o._K,v.UU),(0,i.KT)(o.wk,v.UU),(0,i.KT)(o.AF,v.UU),s.F,n.Ht,n.TQ,S.i$,r.Ji,r.eZ,n.dn,n.RV,E.Ix,(0,i.lq)(w.j),E.$1,c.F,l.O$,(0,i.lq)(P.KK),(0,i.lq)(C.i),d.t7,u.n,(0,i.lq)(g.Z),(0,i.lq)(k.j),(0,i.lq)(L.U),(0,i.lq)(Me.gB)],(e,t,a,i,o,s,n,r,c,l,d,u,g,S,E,w,P,C,b={trackEvent:()=>0,register:()=>()=>{}},v,_,I,R,L,k)=>{const M=(0,m.o)(),{loginSocialBarOnSite:V,protectedHomepage:F,smSessionCookie:$,memberInfoAppId:W,membersInfoAppDefId:x,smcollectionId:G,isTemplate:H,routerPrefix:J}=e;let{sm_efCookie:z}=e;const Y="22bef345-3c5b-4c18-b782-74d4085112ff",X=r.getUserSession(),te=()=>r.getAppInstanceByAppDefId(Y)||"",De=()=>(0,T.YA)(r),ye=_["specs.thunderbolt.deprecateAppId"],ve=_["specs.ident.usePlatformizedSMAuth"],_e=_["specs.thunderbolt.addPlatformizationOptionLoginFlow"],Ae=_["specs.thunderbolt.addPlatformizationOptionSignUpFlow"],Ie=_["specs.thunderbolt.shouldSearchForRouterPrefix"],Re=!!_["specs.thunderbolt.useUrlFromBrowserWindowInsteadOfViewerModel"],Ne=_["specs.thunderbolt.shouldValidateRedirectUrl"],Oe=()=>!(!r.getSiteMemberId()&&!r.getSmToken()),{smSettings:Te,tpaAppDefinitionIds:Le,tpaApplicationIds:ke,tpaPageIds:Me,policyLinks:Be,translations:Fe}=t,qe=ye?Le[x]:W&&ke[W],{metaSiteId:$e,externalBaseUrl:He,siteId:je,siteRevision:Ke}=n.site,Je=n.requestUrl,ze=n.viewMode,Ye=n.anywhereConfig?.siteId??je,Xe=n.anywhereConfig?.revision??Ke,Qe=-1!==y.UG.findIndex(e=>u?.navigator?.userAgent?.includes(e)),Ze=!Qe,et=!Qe,tt=`/_api/wix-sm-webapp/tokens/verify/${$e}/${Ye}`,at=`${He.replace(/\/$/,"")}/api/wix-sm/v1/authorize/${Ye}/pages`,it=`/_api/wix-sm-webapp/tokens/logout/${$e}`,ot=`/_api/wix-sm-webapp/member/changePasswordWithMailToken?metaSiteId=${$e}&collectionId=${G}`,st="/_api/iam/state-machine-service",nt=Te.smFirstDialogLogin?"login":"signup",{socialLoginFacebookEnabled:rt,socialLoginGoogleEnabled:ct,termsOfUse:lt,privacyPolicy:dt,codeOfConduct:ut,customSignUpPageId:gt,customSignInPageId:mt}=Te,{privacyNoteType:pt,joinCommunityCheckedByDefault:ht}=(e=>({privacyNoteType:Q(e),joinCommunityCheckedByDefault:Z(e)}))(Te);let St={},Et=$;const wt=Ie?J:y.DZ,Pt={},Ct={},bt=U({sessionManager:r,businessLogger:w,wixBiSession:P,viewMode:ze?.toUpperCase(),language:d});bt.siteMembersFeatureLoaded();const ft={},Dt=(0,T.I5)(o,{credentials:"same-origin",headers:{accept:"application/json","x-wix-site-revision":`${Xe}`,"x-wix-client-artifact-id":"thunderbolt"}},Je),yt=(0,ie.u)({isSSR:!1,..._["specs.thunderbolt.siteMembersMultilingualLanguage"]&&d?.isMultilingualEnabled?{multilingualOptions:{isPrimaryLanguage:k?.isOriginalLanguage||!0,locale:k?.currentLanguage.locale??"en",lang:k?.currentLanguage.languageCode??"en"}}:{}}),vt=((e,t)=>{let a;return{canHavePublicMembers:async()=>a||(a=new Promise(async a=>{const i=await ee(e,t()),o=i?.publicMemberCandidates;a(o===q.ANYONE)}),a)}})(yt,te),_t=A.get(c,l,S,u,R),At=new URL(Je).searchParams,It={};At.forEach((e,t)=>{It[t]=e});const Rt=(e=>{let{query:t}=e;const a=f().tryParse(null==t?void 0:t.headlessExternalUrls,{})??{};return null==a?void 0:a.headlessClientId})({query:It}),Nt=((e,t,a,i,o,s)=>{let n;const r="/_serverless/collection-settings-facade/get-settings",c=i["specs.thunderbolt.shouldSendCookiesForSiteMembersSettings"],l=async()=>{if(n)return n;const t=s?`${r}?clientId=${s}`:r,a={headers:{"Content-Type":"application/json",authorization:o()}};return c||(a.credentials="omit"),e(t,a).then(e=>(n=e,n))},d=async()=>l().then(e=>e.collectionSettings);return{getCombinedCollectionSettings:l,getSiteMembersSettings:d,getCaptchaSettings:()=>d().then(T.YG).catch(e=>(t.captureError(e,{tags:{feature:"site-members"}}),a.trackEvent((0,y.SU)(y.WW.ACTIONS.SETTINGS.FAIL)),{invisible:{login:!1,signup:!1},visible:{login:!1,signup:!0}})),getEnabledConnections:e=>l().then(t=>t.enabledConnections.filter(({appDefId:t})=>!1!==e[t])??[]),getLoginRedirectUrl:()=>l().then(e=>e.loginUrl),getLogoutRedirectUrl:()=>l().then(e=>e.logoutUrl)}})(Dt,s,b,_,()=>te(),Rt),Ot=(0,T.bR)(u),Tt=(0,T.Ed)(u,M),Lt=new B(C,async()=>{Tt.hideCaptchaBadge()}),kt=L?.getBsi(),Ut=kt?kt.split("|")[0]:"00000000-0000-0000-0000-000000000000",Mt=e=>{s.interactionStarted(y.sH.SOCIAL_APP_LOGIN_WITH_VENDOR(e))},Vt={appDidMount(){},async handleSocialLoginResponse(e,t,a=!1,i=!1){const o=y.UI[t]??t;s.interactionStarted(y.sH.SOCIAL_APP_LOGIN),s.interactionEnded(y.sH.SOCIAL_APP_LOGIN),s.interactionEnded(y.sH.SOCIAL_APP_LOGIN_WITH_VENDOR(o)),b.trackEvent((0,y.SU)(y.WW.ACTIONS.LOGIN.SUBMIT,o)),_["specs.thunderbolt.useNewPostLoginRedirect"]||(0,T.$0)(u,Je,{},Re);const n=await Vt.handleIAMLoginResponseV1(e,a,i);return b.trackEvent((0,y.SU)(y.WW.ACTIONS.LOGIN.SUCCESS,o)),n},async handleIAMLoginResponseV1(e,t=!1,a=!1){if(e.identity?.status?.name===fe.EH.PENDING){if(ve){const t=Me[y.$m.ADMIN_APPROVAL];if(t)return new Promise((a,i)=>{C?.open(t,()=>{(0,T.$0)(u,Je,{error:T.Mi.ACCESS_DENIED},Re),Lt.rejectAuthenticationRequest(),i(y.qd.CANCELED),Vt.closeCustomAuthenticationDialogs(!1)},{email:e.identity?.email?.address}).then(()=>{_t.hideDialog(!0)})})}return Vt.showAdminApprovalDialog(e.identity.email?.address??"")}const i=(0,T.N3)(e),o=e.sessionToken,s=(0,T.FB)(e.additionalData?.protectedPages);if((0,T.$0)(u,Je,{sessionToken:o},Re)&&_["specs.thunderbolt.useNewPostLoginRedirect"])return(0,T.yw)();const n=await Vt.applySessionToken(o,i,t&&!s,a);return{sessionToken:o,member:i,...t?{pages:s??n}:{}}},async promptLogin(e={},t=Lt.config?.isCloseable??!0,a=Lt.config?.returnPages??!1){const{mode:i,modal:o}=e,s="login"===(i??nt),n=o?"popup":"fullscreen";return H?(await Vt.showNotificationDialog(Fe.templateNotificationTitle,Fe.templateNotificationMessage,Fe.containerOk),Promise.reject(y.qd.CANCELED)):(Tt.loadScript(d.userLanguage,y.c8),s?Vt.showLoginDialog({isCloseable:t,displayMode:n,returnPages:a}):Vt.showSignUpDialog({isCloseable:t,displayMode:n,returnPages:a}))},promptForgotPassword:(e=!0)=>new Promise((t,a)=>{Lt.assignRequestAuthenticationPromise(t,a);const i={isCloseable:e,directionByLanguage:d.directionByLanguage,translations:Fe},o={async onCloseDialogCallback(){(0,T.Fy)(u,Je,Re),bt.closingDialog("RequestResetPassword"),_t.hideDialog(),Lt.rejectAuthenticationRequest()},onSubmitCallback:e=>Vt.sendResetPasswordEmail(e).then(async()=>{const e=()=>{(0,T.Fy)(u,Je,Re),Lt.resolveAuthenticationRequest(),a(y.qd.CANCELED)};Vt.showNotificationDialog(Fe.resetPasswordCheckEmailTitle,Fe.resetPasswordCheckEmailText,Fe.resetPasswordOk,e,e)})};if(ve){const e=Me[y.$m.FORGOT_PASSWORD];if(e)return C?.open(e,()=>{(0,T.Fy)(u,Je,Re),Lt.resolveAuthenticationRequest(),a(y.qd.CANCELED)}).then(()=>{_t.hideDialog(!0)})}_t.displayDialog("RequestPasswordResetDialog",i,o)}),async requestAuthentication(e={}){if(Et)return{success:!0,token:Et,reason:y.qd.ALREADY_LOGGED_IN};try{const t=!F,{sessionToken:a}=await Vt.promptLogin(e,t);return{success:!0,token:a,reason:y.qd.SUCCESS}}catch(e){return{success:!1,reason:e}}},async requestAuthorizedPages(e={}){if(Oe()){return{success:!0,pages:await Vt.authorizeMemberPagesBySignedInstance(te())}}try{const t=!F;Lt.setConfig({isCloseable:t,returnPages:!0});const a=await Vt.promptLogin(e,t,!0);return Lt.reset(),{success:!0,pages:a.pages}}catch(e){return{success:!1,reason:e}}},async applySessionToken(e,t,a=!1,o=!1){if((0,p.fU)(u))throw y.Nw;let n;if(s.interactionStarted(y.sH.VERIFY_TOKEN),o)await r.loadNewSession({reason:"memberLogin",authorizationCode:e});else{const t=await yt.request(function(e){var t=(0,K.d)(Pe,{}),a=t.toJSON,i=t.fromJSON,o=(0,K.d)(Ce,{}).fromJSON;function s(t){var i=t.host,s=a(e);return{entityFqdn:"wix.iam.cookie.v1.cookie",method:"POST",methodFqn:"wix.iam.cookie.v1.CookieService.CreateSessionCookie",url:be({protoPath:"/v1/createSessionCookie",data:s,host:i}),data:s,transformResponse:o,fallback:[{method:"POST",url:be({protoPath:"/v1/createSessionCookie",data:s,host:i}),data:s}]}}return s.fromReq=i,s.__isAmbassador=!0,s}({sessionToken:e,protectedPages:a}),{signedInstance:te()}).then(e=>e.data).catch(e=>{throw e.response?.data??e});await r.loadNewSession({reason:"memberLogin"}),a&&(n=(0,T.FB)(t?.protectedPages))}var c;if(s.interactionEnded(y.sH.VERIFY_TOKEN),Et=e,St=t??await Vt.getMemberDetails(),await(c=St,Promise.all(Object.entries(Pt).map(async([e,t])=>{try{if("$$$timeout$$$"===await Promise.race([t(c),(0,T.yy)(3e3).then(()=>"$$$timeout$$$")]))throw new Error(`callback ${e} timed out`)}catch(e){s.captureError(e,{tags:{feature:"site-members"}})}}))),i.export({memberDetails:St}),a)return n||await Vt.authorizeMemberPagesBySignedInstance(te())},async authorizeMemberPagesByCookie(){const e=(0,p.fU)(u)?{headers:{cookie:`smSession=${$}`}}:void 0,{authorizedPages:t}=await Dt(at,e);return t},async authorizeMemberPagesByToken(e){if(e===$)return this.authorizeMemberPagesByCookie();const{payload:t}=await Dt(tt,{method:"POST",body:`token=${e}`}),{pages:a}=t;return a},async authorizeMemberPagesBySignedInstance(e){const t={headers:{authorization:e}},{authorizedPages:a}=await Dt(at,t);return a},async getMemberDetails(e=!1){if(St.id&&!e)return St;if(!r.getSiteMemberId())return null;const t=await(_["specs.thunderbolt.preventGetMemberDetailsWaterfall"]?(async()=>{const[e,t]=await Promise.all([(0,T.hv)(async()=>(await Dt("/_api/members/v1/members/my?fieldsets=FULL",{headers:{authorization:r.getAppInstanceByAppDefId(Y)??""}})).member,()=>null),(0,T.hv)(async()=>(await Dt(`/api/wix-sm/v1/members/${r.getSiteMemberId()}/role`,{headers:{authorization:r.getAppInstanceByAppDefId(Y)??""}})).role,()=>N.MEMBER)]);return e&&t?ae({member:e,role:t}):null})():(async()=>{let e;try{const t=await Dt("/_api/members/v1/members/my?fieldsets=FULL",{headers:{authorization:r.getAppInstanceByAppDefId(Y)??""}});e=t.member}catch(e){return null}const{role:t}=await(0,T.hv)(()=>Dt(`/api/wix-sm/v1/members/${e?.id}/role`,{headers:{authorization:r.getAppInstanceByAppDefId(Y)??""}}),()=>({role:N.MEMBER}));return ae({member:e,role:t})})());return t?((e=>{const t=u?.localStorage?.getItem?.(y.Nr),a=JSON.stringify(e);if(t&&t!==a)return bt.cachePrediction();u?.localStorage?.setItem?.(y.Nr,a)})(t),St=t,i.export({memberDetails:St}),e&&await(a=St,Promise.all(Object.values(ft).map(async e=>{try{await e(a)}catch(e){s.captureError(e,{tags:{feature:"site-members"}})}}))),St):null;var a},async sendForgotPasswordMail(e){return this.sendResetPasswordEmail(e)},async sendResetPasswordEmail(e){s.interactionStarted(y.sH.RESET_PASSWORD);const t=d.userLanguage,a={url:(0,T.g9)(Je)??Je},i=JSON.stringify({language:t,email:e,redirect:a}),o={"Content-Type":"application/json",authorization:te()};await Dt("/_api/iam/recovery/v1/send-email",{headers:o,method:"POST",body:i}),s.interactionEnded(y.sH.RESET_PASSWORD)},async sendSetPasswordEmail(e,t){const a=await Dt("/_api/wix-sm-webapp/members/v1/auth/members/send-set-password-email",{method:"POST",headers:{"Content-Type":"application/json",authorization:te()},body:JSON.stringify({email:e,...t?.hideIgnoreMessage?{hideIgnoreMessage:t.hideIgnoreMessage}:{}})});return!!a?.accepted},async changePassword(e,t){const a=encodeURIComponent(e),i=t.startsWith(y.Zq),o=i?"/_api/iam/recovery/v1/recover":ot,s=i?JSON.stringify({password:e,recovery_token:t}):`newPassword=${a}&forgotPasswordToken=${t}`,n=i?{"Content-Type":"application/json",authorization:te()}:void 0;await Dt(o,{method:"POST",headers:n,body:s})},async sendEmailVerification(e){return this.resendEmailVerification(e)},async resendEmailVerification(e){await Dt(`/_api/wix-sm-webapp/tokens/email/resend/${e}`)},async logout(e){if(!Oe())return!1;if(_["specs.thunderbolt.logoutOnIAM"]?await yt.request(function(e){var t=(0,K.d)(me,{}),a=t.toJSON,i=t.fromJSON,o=(0,K.d)(he,{}).fromJSON;function s(t){var i=t.host,s=a(e);return{entityFqdn:"wix.iam.authentication.v1.authentication",method:"GET",methodFqn:"wix.iam.authentication.v1.AuthenticationService.Logout",url:we({protoPath:"/v1/logout",data:s,host:i}),params:(0,j.bU)(s),transformResponse:o}}return s.fromReq=i,s.__isAmbassador=!0,s}({}),{signedInstance:te()}).catch(()=>{b.trackEvent((0,y.SU)(y.WW.ACTIONS.LOGOUT.FAIL))}):await Dt(it,{method:"POST"}).catch(()=>{b.trackEvent((0,y.SU)(y.WW.ACTIONS.LOGOUT.FAIL))}),await Promise.all(Object.entries(Ct).map(async([e,t])=>{try{if("$$$timeout$$$"===await Promise.race([t(),(0,T.yy)(3e3).then(()=>"$$$timeout$$$")]))throw new Error(`callback ${e} timed out`)}catch(e){s.captureError(e,{tags:{feature:"site-members"}})}})),e){const t=`./${e.replace(/^\//,"")}`;await g.navigate(t)}const t=await Vt.getLogoutUrl();return t?u?.location.replace(t):(0,p.fU)(u)||u.document.location.reload(),!(!e&&!t)},registerToUserLogin:(e,t=(0,D.uniqueId)("callback"))=>(Pt[t]=e,t),unRegisterToUserLogin(e){delete Pt[e]},registerToMemberLogout(e){const t=(0,D.uniqueId)("logout_callback");return Ct[t]=e,t},unRegisterToMemberLogout(e){delete Ct[e]},registerToMemberDetailsRefresh(e){const t=(0,D.uniqueId)("mdrcb");return ft[t]=e,t},unRegisterToMemberDetailsRefresh(e){delete ft[e]},async showWelcomeDialog(e=!0){const t={isCloseable:e,translations:Fe},a=E.getParsedUrl(),i={onCloseDialogCallback(){(0,T.Fy)(u,Je,Re),bt.closingDialog("WelcomeDialog");const e=new URL(Je).hostname,t=0===e.indexOf("www")?e.substr(3):e;Ge("sm_ef","/",t),z="",_t.hideDialog(),g.navigate(a.href)},onSubmitCallback(){const e=new URL(Je).hostname,t=0===e.indexOf("www")?e.substr(3):e;Ge("sm_ef","/",t),z="",_t.hideDialog(),qe&&g.navigate("./account/my-account"),g.navigate(a.href)}};s.interactionStarted(y.sH.WELCOME_DIALOG),s.interactionEnded(y.sH.WELCOME_DIALOG),_t.displayDialog("WelcomeDialog",t,i)},async showNoPermissionsToPageDialog(e){if(ve){if(Me[y.$m.ACCESS_RESTRICTED])return void g.navigate(`${wt}${y.m2[y.$m.ACCESS_RESTRICTED]}`)}const t={onCloseDialogCallback(){(0,T.Fy)(u,Je,Re),_t.hideDialog(),e&&e()},onSwitchAccountLinkClick(){Vt.logout()}};_t.displayDialog("NoPermissionsToPageDialog",{translations:Fe},t)},async navigateToResetPasswordPage(e){if(Me[y.$m.RESET_PASSWORD]){const t=E.getParsedUrl(),a=new URL(`${wt}${y.m2[y.$m.RESET_PASSWORD]}`,t.origin);return t.searchParams.forEach((e,t)=>{a.searchParams.set(t,e)}),a.searchParams.set("resetPasswordToken",e),await g.navigate(a.pathname+a.search)}this.showResetPasswordDialog(e)},async showResetPasswordDialog(e){const t=()=>{const e=E.getParsedUrl();return e.searchParams.delete("forgotPasswordToken"),e.searchParams.delete("forgotPasswordLang"),E.pushUrlState(e),e},a={isCloseable:!0,isTermsOfUseNeeded:!(!lt?.enabled||!Be.termsOfUse),isPrivacyPolicyNeeded:!(!dt?.enabled||!Be.privacyPolicy),termsOfUseLink:Be.termsOfUse,privacyPolicyLink:Be.privacyPolicy,directionByLanguage:d.directionByLanguage,translations:Fe},i={onCloseDialogCallback(){(0,T.Fy)(u,Je,Re),bt.closingDialog("ResetPasswordDialog");const e=t();_t.hideDialog(),g.navigate(e.href)},async onSubmitCallback(i){try{await Vt.changePassword(i,e),Vt.showNotificationDialog(Fe.resetPasswordSuccessTitle,"",Fe.containerOk,async()=>{if(e.startsWith(y.Zq)){const e=new URL(Je).searchParams.get("redirectUrl");if(e){if(!Ne)return u?.location.replace(e);if((0,T.ow)(e))return u?.location.replace(e);s.captureError(new Error("Invalid redirect URL blocked"),{tags:{feature:"site-members"}})}}const a=t();await Vt.showLoginDialog(),g.navigate(a.href)})}catch(e){const t=(0,T.E2)(e).toString();if(t!==y.OQ.RESET_PASSWORD_TOKEN_EXPIRED&&t!==y.OQ.NEW_RESET_PASSWORD_TOKEN_EXPIRED)throw e;if(ve){if(Me[y.$m.EXPIRED_TOKEN])return void await g.navigate(`${wt}${y.m2[y.$m.EXPIRED_TOKEN]}`)}Vt.showNotificationDialog(Fe.passwordHasExpiredTitle,Fe.passwordHasExpiredText,Fe.passwordHasExpiredOk,()=>Vt.promptForgotPassword(a.isCloseable).then(()=>{const e=E.getParsedUrl();g.navigate(e.href)}))}}};_t.displayDialog("ResetPasswordDialog",a,i)},async showLoggedInResetPasswordDialog(){const e={isCloseable:!0,directionByLanguage:d.directionByLanguage,translations:Fe},t={onCloseDialogCallback(){bt.closingDialog("LoggedInResetPasswordDialog"),_t.hideDialog()},async onSubmitCallback(){}};_t.displayDialog("LoggedInResetPasswordDialog",e,t)},showLoginDialog:async(e={},t)=>new Promise(async(a,i)=>{Vt.showLoginDialogWithExternalPromise(e,t,{resolve:a,reject:i})}),async showLoginDialogWithExternalPromise(e={},t,a){const{returnPages:i,isCloseable:o,displayMode:n}={isCloseable:!0,displayMode:"fullscreen",returnPages:!1,...e},r=await Nt.getCaptchaSettings();if(Tt.setCaptchaBadgeVisibility(r.invisible.login),_e){const e=Me[y.$m.LOGIN];if(e)return a&&Lt.assignRequestAuthenticationPromise(a.resolve,a.reject),void C?.open(e,()=>{(0,T.Fy)(u,Je,Re),Lt.rejectAuthenticationRequest(),a?.reject(y.qd.CANCELED)}).then(()=>{_t.hideDialog(!0)})}if(mt&&C?.isLightbox(mt))return Vt.showCustomAuthenticationDialog(mt,i).then(a?.resolve,a?.reject);a&&Lt.assignRequestAuthenticationPromise(a.resolve,a.reject);const c="Enabled"===_["specs.ShouldForceCaptchaVerificationOnLoginSpec"]||r.visible.login,[l,g]=(0,D.partition)(await Vt.getConnections(),{appDefId:y.ch.PASSWORD}),m=await Vt.getLoginUrl(),p={bsi:Ut,displayMode:n,language:d.userLanguage,directionByLanguage:d.directionByLanguage,isCloseable:o,smCollectionId:G,svSession:X,biVisitorId:De(),metaSiteId:$e,isEmailLoginEnabled:l.length>0,idps:g,shouldForceCaptchaVerification:!r.invisible.login&&c,isSocialAuthSupported:Ze,serverError:t,reportBi:w.reportBi,translations:Fe,externalBaseUrl:Vt.getExternalBaseUrl(),headlessRedirectUrl:m},S={onCloseDialogCallback(){(0,T.Fy)(u,Je,Re),_t.hideDialog(),bt.closingDialog("MemberLoginDialog",n),Lt.rejectAuthenticationRequest()},submit:(e,t,o)=>(s.interactionStarted(y.sH.DEFAULT_LOGIN),bt.emailAuthSubmitClicked("MemberLoginDialog",n),Vt.login(e,t,o,i,void 0,!0).then(e=>{s.interactionEnded(y.sH.DEFAULT_LOGIN),_t.hideDialog(),a?.resolve(e)}).catch(e=>{throw(0,T.qi)(e)&&s.interactionEnded(y.sH.DEFAULT_LOGIN),e})),onForgetYourPasswordClick(){Vt.promptForgotPassword(o)},onSwitchDialogLinkClick(){Vt.showSignUpDialog({isCloseable:o,displayMode:n,returnPages:i}).then(a?.resolve,()=>{Lt.rejectAuthenticationRequest()})},onBackendSocialLogin:(e,t)=>Vt.handleSocialLoginResponse(e,t,i).then(e=>{_t.hideDialog(),a?.resolve(e)}),getHostReadyPayload:()=>({visitorId:De(),svSession:X}),openCaptcha:(0,h.V1)({captcha:I,userLanguage:d.userLanguage}),reportSocialAuthStarted:Mt};bt.loginOrSignUpDialogLoaded("MemberLoginDialog",n),await _t.displayDialog("MemberLoginDialog",p,S),Vt.closeCustomAuthenticationDialogs(!0)},async showSignUpDialog(e={},t){const{returnPages:a,isCloseable:i,displayMode:o}={isCloseable:!0,displayMode:"fullscreen",returnPages:!1,...e},n=await Nt.getCaptchaSettings();if(Tt.setCaptchaBadgeVisibility(n.invisible.signup),Ae){const e=Me[y.$m.SIGN_UP];if(e)return new Promise((t,a)=>{Lt.assignRequestAuthenticationPromise(t,a),C?.open(e,()=>{(0,T.Fy)(u,Je,Re),Lt.rejectAuthenticationRequest(),a(y.qd.CANCELED)}).then(()=>{_t.hideDialog(!0)})})}if(gt&&C?.isLightbox(gt))return Vt.showCustomAuthenticationDialog(gt,a);const r="Enabled"!==_["specs.ShouldPassCaptchaVerificationOnSignupSpec"]&&"Enabled"===_["specs.ShouldForceCaptchaVerificationOnSignupSpec"];return new Promise(async(e,c)=>{const l=r||n.visible.signup&&"Enabled"!==_["specs.ShouldPassCaptchaVerificationOnSignupSpec"],[g,m]=await Promise.all([Vt.getConnections(),Vt.getLoginUrl()]),[p,S]=(0,D.partition)(g,{appDefId:y.ch.PASSWORD});Lt.assignRequestAuthenticationPromise(e,c);const E={bsi:Ut,displayMode:o,language:d.userLanguage,directionByLanguage:d.directionByLanguage,isCloseable:i,smCollectionId:G,biVisitorId:De(),svSession:X,metaSiteId:$e,isSocialAuthSupported:Ze,isEmailLoginEnabled:p.length>0,idps:S,isCommunityInstalled:await vt.canHavePublicMembers(),privacyNoteType:pt,joinCommunityCheckedByDefault:ht,isTermsOfUseNeeded:!(!lt?.enabled||!Be.termsOfUse),isPrivacyPolicyNeeded:!(!dt?.enabled||!Be.privacyPolicy),isCodeOfConductNeeded:!(!ut?.enabled||!Be.codeOfConduct),shouldForceCaptchaVerification:!n.invisible.signup&&l,termsOfUseLink:Be.termsOfUse,privacyPolicyLink:Be.privacyPolicy,codeOfConductLink:Be.codeOfConduct,serverError:t,reportBi:w.reportBi,translations:Fe,externalBaseUrl:Vt.getExternalBaseUrl(),headlessRedirectUrl:m},P={onCloseDialogCallback(){(0,T.Fy)(u,Je,Re),_t.hideDialog(),bt.closingDialog("SignUpDialog",o),Lt.rejectAuthenticationRequest()},async submit(t,i,n){let r;if(E.isCommunityInstalled){r=("boolean"==typeof n?n:n.isCommunityChecked)?fe.lS.PUBLIC:fe.lS.PRIVATE}const c="boolean"==typeof n?void 0:n?.recaptchaToken;return s.interactionStarted(y.sH.DEFAULT_SIGNUP),bt.emailAuthSubmitClicked("SignUpDialog",o),Vt.register(t,i,void 0,r,!0,a,c,void 0).then(t=>{s.interactionEnded(y.sH.DEFAULT_SIGNUP);const{member:i,sessionToken:o,pages:n}=t;o&&(_t.hideDialog(!0),e({member:i,sessionToken:o,...a?{pages:n}:{}}))}).catch(e=>{throw(0,T.NU)(e)&&s.interactionEnded(y.sH.DEFAULT_SIGNUP),e})},onSwitchDialogLinkClick(){Vt.showLoginDialog({isCloseable:i,displayMode:o,returnPages:a}).then(e,()=>{Lt.rejectAuthenticationRequest()})},onBackendSocialLogin:(t,i)=>Vt.handleSocialLoginResponse(t,i,a).then(t=>{_t.hideDialog(),e(t)}),getHostReadyPayload:()=>({visitorId:De(),svSession:X}),openCaptcha:(0,h.V1)({captcha:I,userLanguage:d.userLanguage}),reportSocialAuthStarted:Mt};bt.loginOrSignUpDialogLoaded("SignUpDialog",o),await _t.displayDialog("SignUpDialog",E,P),Vt.closeCustomAuthenticationDialogs(!0)})},async hideAuthDialog(){console.warn("hideAuthDialog is not supported")},async showNotificationDialog(e,t,a,i=()=>0,o=()=>0){const s={isCloseable:!0,title:e,description:t,okButtonText:a,translations:Fe},n={onCloseDialogCallback(){(0,T.Fy)(u,Je,Re),bt.closingDialog("NotificationDialog"),_t.hideDialog(),o()},onOkButtonClick(){_t.hideDialog(),i()}};await _t.displayDialog("NotificationDialog",s,n)},showConfirmationEmailDialog:async(e,t=!0)=>new Promise((a,i)=>{const o={isCloseable:!0,isSignUp:t,translations:Fe},s={onCloseDialogCallback(){(0,T.Fy)(u,Je,Re),bt.closingDialog("ConfirmationEmailDialog"),_t.hideDialog(),Lt.rejectAuthenticationRequest(),i(y.qd.CANCELED)},async onResendConfirmationEmail(){await Vt.resendEmailVerification(e),await Vt.showConfirmationEmailDialog(e,!1).catch(i)}};_t.displayDialog("ConfirmationEmailDialog",o,s)}),showAdminApprovalDialog:async e=>new Promise((t,a)=>{const i=()=>{(0,T.$0)(u,Je,{error:T.Mi.ACCESS_DENIED},Re),Lt.rejectAuthenticationRequest(),a(y.qd.CANCELED),Vt.closeCustomAuthenticationDialogs(!1)};Vt.showNotificationDialog("",`${Fe.applySuccess1} ${Fe.applySuccess2}`.replace("{0}",e),Fe.containerOk,i,i)}),async showCustomAuthenticationDialog(e,t=!1){if(!C)throw new Error("popup unavailable");return new Promise(async(a,i)=>{Lt.assignRequestAuthenticationPromise(a,i);const o=Vt.registerToUserLogin(async()=>{Lt.resolveAuthenticationRequest({member:St,sessionToken:Et,...t?{pages:await Vt.authorizeMemberPagesBySignedInstance(te())}:{}}),Vt.unRegisterToUserLogin(o),C.getCurrentLightboxId()===e&&C.close()},"customAuthCbId");await Lt.openPopupPage(e,()=>{Vt.unRegisterToUserLogin(o)}),_t.hideDialog()})},async closeCustomAuthenticationDialogs(e=!1){const t=C?.getCurrentLightboxId();t&&[gt,mt].includes(t)&&(e&&Lt.preventCustomPopupCloseCallback(),await C.close(),Lt.allowCustomPopupCloseCallback())},showAdminApprovalDialogSMAuth:async(e,t)=>new Promise((a,i)=>{C?.open(t,()=>{(0,T.$0)(u,Je,{error:T.Mi.ACCESS_DENIED}),Lt.rejectAuthenticationRequest(),i(y.qd.CANCELED),Vt.closeCustomAuthenticationDialogs(!1)},{email:e}).then(()=>{_t.hideDialog(!0)})}),async promptAdminApproval(e){const t=Me?.[y.$m.ADMIN_APPROVAL];return ve&&t?Vt.showAdminApprovalDialogSMAuth(e,t):Vt.showAdminApprovalDialog(e)},async promptExpiredResetLink(e=!0){const t=Me?.[y.$m.EXPIRED_TOKEN];if(ve&&t)return g.navigate(`${wt}${y.m2[y.$m.EXPIRED_TOKEN]}`);Vt.showNotificationDialog(Fe.passwordHasExpiredTitle,Fe.passwordHasExpiredText,Fe.passwordHasExpiredOk,()=>Vt.promptForgotPassword(e).then(()=>{const e=E.getParsedUrl();g.navigate(e.href)}))},async promptResetPassword(){const e=Vt.getForgotPasswordToken();if(e){const t=Me?.[y.$m.RESET_PASSWORD];return ve&&t?Vt.navigateToResetPasswordPage(e):Vt.showResetPasswordDialog(e)}},async promptEmailConfirmation(){const e=a.get().emailConfirmationStateToken,t=a.get().email,i=Me?.[y.$m.EMAIL_CONFIRMATION];if(ve&&i){const o=await new Promise(o=>{a.update(t=>({...t,emailConfirmationStateToken:e??""}));C?.open(i,()=>{const e=a.get().emailConfirmationResponse;e.state!==fe.Gd.SUCCESS&&e.state!==fe.Gd.REQUIRE_OWNER_APPROVAL&&this.promptLogin({mode:"signup"}),o(e)},{email:t}).then(()=>{_t.hideDialog(!0)})});return this.getStateMachine(o,t)}const o=_["specs.thunderbolt.verificationCodeDialogNewLogic"],s=e??"";if(o){const e=await Vt.showVerificationCodeDialog({email:t,stateToken:s});return Vt.getStateMachine(e,t)}return Vt.recurciveEmailVerification(t,e).then(e=>(_t.hideDialog(),Vt.getStateMachine(e,t)))},async promptAuthPage(e,t){switch(e){case O.EXPIRED_RESET_LINK:return Vt.promptExpiredResetLink();case O.ADMIN_APPROVAL:if("string"!=typeof t)throw new Error("Email is required for ADMIN_APPROVAL");return Vt.promptAdminApproval(t);case O.NO_PERMISSIONS:return Vt.showNoPermissionsToPageDialog(t);case O.LOGIN:return Vt.promptLogin(t);case O.FORGOT_PASSWORD:return Vt.promptForgotPassword(t);case O.RESET_PASSWORD:return Vt.promptResetPassword();case O.EMAIL_CONFIRMATION:return Vt.promptEmailConfirmation();default:throw new Error(`Unknown auth page: ${e}`)}},getForgotPasswordToken:()=>new URL((0,p.fU)(u)?Je:u.location.href).searchParams.get("forgotPasswordToken"),shouldDisplayWelcomeDialog:()=>z&&qe,async verifyEmail(e){try{const t=a.get().emailConfirmationStateToken,i=await yt.request(Ue({stateToken:t,code:e}),{signedInstance:te()});a.update(e=>({...e,emailConfirmationResponse:i?.data}))}catch(e){throw(0,T.E2)(e.response?.data)}},async resendVerificationCodeEmail(){bt.siteMembersEmailConfirmationOnResendCodeClick();const e=a.get().emailConfirmationStateToken,t=await Dt(`${st}/v1/proceed`,{method:"POST",headers:{"Content-Type":"application/json",authorization:te()},body:JSON.stringify({stateToken:e})});a.update(e=>({...e,emailConfirmationStateToken:t.stateToken}))},showVerificationCodeDialog:async(e,t=!0)=>new Promise(async(a,i)=>{s.interactionStarted(y.sH.VERIFICATION_CODE),bt.siteMembersEmailConfirmationNewMembersModalLoad(),Lt.assignRequestAuthenticationPromise(a,i);const o={language:d.userLanguage,directionByLanguage:d.directionByLanguage,isCloseable:Lt.config?.isCloseable??!0,displayMode:"customPopup",email:e?.email,error:e?.error,translations:Fe,isAuthV2Enabled:!0,stateToken:e?.stateToken,isVerificationCodeDialogNewLogic:_["specs.thunderbolt.verificationCodeDialogNewLogic"]},n={async onResendVerificationCodeEmail(){bt.siteMembersEmailConfirmationOnResendCodeClick(),await Dt(`${st}/v1/proceed`,{method:"POST",headers:{"Content-Type":"application/json",authorization:te()},body:JSON.stringify({stateToken:e.stateToken})})},onCloseDialogCallback(){bt.closingDialog("VerificationCode"),(0,T.Fy)(u,Je,Re),_t.hideDialog(),Lt.rejectAuthenticationRequest(),i(y.qd.CANCELED)},async onSubmitCallback(t){bt.siteMembersEmailConfirmationSendCodeClick();if(_["specs.thunderbolt.verificationCodeDialogNewLogic"])try{const a={stateToken:e.stateToken||"",code:t},i=await yt.request(Ue(a),{signedInstance:te()});return i?.data}catch(e){const t=(0,T.E2)(e.response?.data);if(t===y.qd.CANCELED)return i(t);throw t}a(t)},onSuccessCallback:e=>{_t.hideDialog(),a(e)}};s.interactionEnded(y.sH.VERIFICATION_CODE),_t.displayDialog("VerificationCodeDialog",o,n,t)}),async appWillMount(){V&&await Vt.getMemberDetails();switch(new URL(n.requestUrl).searchParams.get("showDialog")){case"MemberLoginDialogV2":await Vt.showLoginDialogWithExternalPromise();break;case"MemberLoginDialog":Vt.showLoginDialog();break;case"SignUpDialog":Vt.showSignUpDialog();break;case"RequestPasswordResetDialog":Vt.promptForgotPassword();break;case"ResetPasswordDialog":Vt.showResetPasswordDialog("faketoken");break;case"LoggedInResetPasswordDialog":Vt.showLoggedInResetPasswordDialog();break;case"WelcomeDialog":Vt.showWelcomeDialog();break;case"NoPermissionsToPageDialog":Vt.showNoPermissionsToPageDialog();break;case"NotificationDialog":Vt.showNotificationDialog("title","description","ok");break;case"ConfirmationEmailDialog":Vt.showConfirmationEmailDialog("fakemember");break;case"VerificationCodeDialog":Vt.showVerificationCodeDialog({email:"testEmail@test.com"});break;case"ExpiredResetPasswordDialog":Vt.showNotificationDialog(Fe.passwordHasExpiredTitle,Fe.passwordHasExpiredText,Fe.passwordHasExpiredOk,()=>Vt.promptForgotPassword(!1).then(()=>{const e=E.getParsedUrl();g.navigate(e.href)}))}},pageWillUnmount({pageId:e}){[gt,mt].includes(e)||_t.hideDialog()},getSocialAuthComponentProps:()=>(0,T._G)({config:e,viewerModel:n,sessionManager:r,bsiManager:L,handleSocialLoginResponse:Vt.handleSocialLoginResponse,isSocialAuthSupported:et,captcha:I,userLanguage:d.userLanguage,reportBi:w.reportBi,reportSocialAuthStarted:Mt,useNewSocialFlow:!0,translations:Fe}),async getConnections(){const e={[y.ch.FACEBOOK]:!0,[y.ch.GOOGLE]:!0,[y.ch.APPLE]:!!_["specs.thunderbolt.enableAppleLogin"]};return Nt.getEnabledConnections(e).then(e=>e.map(({id:e,appDefId:t,displayName:a})=>({id:e,appDefId:t,name:a})))},getLoginUrl(){if(Rt&&_["specs.thunderbolt.shouldFetchLoginUrlByClientId"])return Nt.getLoginRedirectUrl()},getLogoutUrl(){if(Rt)return Nt.getLogoutRedirectUrl()},getRouterPrefix:()=>J,getExternalBaseUrl:()=>_["specs.thunderbolt.shouldUseExternalBaseUrl"]?He:void 0,async register(e,t,a,i,o,n,r,c,l){n=n??!1;try{const d=await Nt.getCaptchaSettings();if(d.visible.signup&&"Enabled"!==_["specs.ShouldPassCaptchaVerificationOnSignupSpec"]&&!r&&!c?.otp&&!c?.verificationId)throw y.pH;s.interactionStarted(y.sH.CODE_SIGNUP),b.trackEvent((0,y.SU)(y.WW.ACTIONS.SIGNUP.SUBMIT));const g=C?.getCurrentLightboxId(),m=v.getCurrentRouteInfo()?.pageId,p=o||gt&&g&&gt===g||gt&&m&&gt===m,h=d.invisible.signup&&p?await Ot(y.MA.SIGNUP):void 0,S=_["specs.thunderbolt.convertBirthdateToISOString"],E=_["specs.thunderbolt.shouldMapFullContactInfoToIdentityProfile"],w={profile:{...(0,T.y0)(a||{},S,E),privacyStatus:i,emails:[e]},loginId:{email:e},password:t,clientMetaData:l,captchaTokens:[...r?[{Recaptcha:r}]:[],...h?[{InvisibleRecaptcha:h}]:[]]},P=await yt.request(function(e){var t=(0,K.d)(Se,{_customField:re,_customValue:ce,_identityProfile:de,_listValue:ue,_mapValue:pe}),a=t.toJSON,i=t.fromJSON,o=(0,K.d)(Ee,{_commonCustomValue:oe,_commonListValue:se,_commonMapValue:ne,_customField:re,_customValue:ce,_identity:le,_identityProfile:de,_listValue:ue,_mapValue:pe}).fromJSON;function s(t){var i=t.host,s=a(e);return{entityFqdn:"wix.iam.authentication.v1.authentication",method:"POST",methodFqn:"wix.iam.authentication.v1.AuthenticationService.RegisterV2",url:we({protoPath:"/v2/register",data:s,host:i}),data:s,transformResponse:o}}return s.fromReq=i,s.__isAmbassador=!0,s}(w),{signedInstance:te()}).then(e=>e.data).catch(e=>{throw e.response?.data??e});s.interactionEnded(y.sH.CODE_SIGNUP);const f=await Vt.getStateMachine(P,e),D=f?.additionalData?.protectedPages,A=(0,T.FB)(D),I=(0,T.$e)(f);if((0,T.$0)(u,Je,{sessionToken:f?.sessionToken},Re)&&_["specs.thunderbolt.useNewPostLoginRedirect"])return(0,T.yw)();const R=await Vt.applySessionToken(f?.sessionToken,I,n&&!A),N=A??R;b.trackEvent((0,y.SU)(y.WW.ACTIONS.SIGNUP.SUCCESS)),b.trackEvent({eventName:"CompleteRegistration",params:{origin:"Site members",method:"Wix"}});const O=f?.sessionToken;return{member:I,status:I.status,sessionToken:O,...n&&N?{pages:N}:{}}}catch(e){throw(0,T.NU)(e)?s.interactionEnded(y.sH.CODE_SIGNUP):b.trackEvent((0,y.SU)(y.WW.ACTIONS.SIGNUP.FAIL)),e}},async getStateMachine(e,t){const i=e?.state;if(i===fe.Gd.REQUIRE_OWNER_APPROVAL){if(ve){const e=Me[y.$m.ADMIN_APPROVAL];if(e)return new Promise((a,i)=>{C?.open(e,()=>{(0,T.$0)(u,Je,{error:T.Mi.ACCESS_DENIED},Re),Lt.rejectAuthenticationRequest(),i(y.qd.CANCELED),Vt.closeCustomAuthenticationDialogs(!1)},{email:t}).then(()=>{_t.hideDialog(!0)})})}return Vt.showAdminApprovalDialog(t)}if(i===fe.Gd.REQUIRE_EMAIL_VERIFICATION){if(ve){const i=Me[y.$m.EMAIL_CONFIRMATION];if(i){const o=await new Promise(o=>{a.update(t=>({...t,emailConfirmationStateToken:e?.stateToken??""}));C?.open(i,()=>{const e=a.get().emailConfirmationResponse;e.state!==fe.Gd.SUCCESS&&e.state!==fe.Gd.REQUIRE_OWNER_APPROVAL&&this.promptLogin({mode:"signup"}),o(e)},{email:t}).then(()=>{_t.hideDialog(!0)})});return this.getStateMachine(o,t)}}const i=_["specs.thunderbolt.verificationCodeDialogNewLogic"],o=e?.stateToken??"";if(i){const e=await Vt.showVerificationCodeDialog({email:t,stateToken:o});return Vt.getStateMachine(e,t)}return Vt.recurciveEmailVerification(t,e?.stateToken).then(e=>(_t.hideDialog(),Vt.getStateMachine(e,t)))}return e},async recurciveEmailVerification(e,t,a,i,o){try{const s={stateToken:t||"",code:o??await Vt.showVerificationCodeDialog({email:e,stateToken:t,error:i},!a)};return(await yt.request(Ue(s),{signedInstance:te()})).data}catch(a){if(a===y.qd.CANCELED)throw a;const i=a?.details?.applicationError?.code??"BAD_CODE";return Vt.recurciveEmailVerification(e,t,!0,i)}},async login(e,t,a,i=!1,o,s=!1){try{const n=await Nt.getCaptchaSettings();if(n.visible.login&&!a?.recaptchaToken&&!o?.otp&&!o?.verificationId)throw y.pH;b.trackEvent((0,y.SU)(y.WW.ACTIONS.LOGIN.SUBMIT));const r=C?.getCurrentLightboxId(),c=v.getCurrentRouteInfo()?.pageId,l=s||mt&&r&&mt===r||mt&&c&&mt===c,d=n.invisible.login&&l?await Ot(y.MA.LOGIN):void 0,g=[];a?.recaptchaToken&&g.push({Recaptcha:a?.recaptchaToken}),d&&g.push({InvisibleRecaptcha:d});const m={loginId:{email:e},password:t,captchaTokens:g},p=await yt.request(function(e){var t=(0,K.d)(ge,{}),a=t.toJSON,i=t.fromJSON,o=(0,K.d)(Ee,{_commonCustomValue:oe,_commonListValue:se,_commonMapValue:ne,_customField:re,_customValue:ce,_identity:le,_identityProfile:de,_listValue:ue,_mapValue:pe}).fromJSON;function s(t){var i=t.host,s=a(e);return{entityFqdn:"wix.iam.authentication.v1.authentication",method:"POST",methodFqn:"wix.iam.authentication.v1.AuthenticationService.LoginV2",url:we({protoPath:"/v2/login",data:s,host:i}),data:s,transformResponse:o}}return s.fromReq=i,s.__isAmbassador=!0,s}(m),{signedInstance:te()}).then(e=>e.data).catch(e=>{throw e.response?.data??e}),h=await Vt.getStateMachine(p,e),S=h?.additionalData?.protectedPages,E=(0,T.FB)(S),w=(0,T.$e)(h);if((0,T.$0)(u,Je,{sessionToken:h?.sessionToken},Re)&&_["specs.thunderbolt.useNewPostLoginRedirect"])return(0,T.yw)();const P=await Vt.applySessionToken(h?.sessionToken,w,i&&!E),f=E??P,D=h?.sessionToken;return{sessionToken:D,member:w,...i?{pages:f}:{}}}catch(t){throw(0,T.qi)(t)||b.trackEvent({eventName:"CustomEvent",params:{eventCategory:"Site members",eventAction:"Log in Failure",eventLabel:"Wix"}}),t?.details?.applicationError?.code===y.OQ.WAITING_APPROVAL&&Vt.showAdminApprovalDialog(e),t?.response?.data??t}},async loginWithIdp(e,t){if((0,p.fU)(u))throw y.Nw;Mt(e);const a=await(async(e,t,a,i,o,s)=>{const n=new URLSearchParams({visitorId:t,bsi:a,svSession:i,privacyStatus:xe(s),tenantType:"SITE"}),r=We(new URL(`/_api/iam/authentication/v1/sso/login/${o}/${e}`,window.location.origin),n);return await Ve(r)})(e,De(),Ut,X,$e,t??ht);return Vt.handleSocialLoginResponse(a,e,!1,!!_["specs.thunderbolt.loadNewSessionCreatesCookie"])},getSettings:async()=>Nt.getCombinedCollectionSettings()};return i.export({promptLogin:Vt.promptLogin,logout:Vt.logout,memberDetails:St}),a.update(e=>({...e,shouldShowRenderingBlockingDialogs:e=>e.relativeUrl!==y.m5&&!(!Vt.getForgotPasswordToken()&&!Vt.shouldDisplayWelcomeDialog()),showRenderingBlockingDialogs:()=>{const e=Vt.getForgotPasswordToken();return e?ve?Vt.navigateToResetPasswordPage(e):Vt.showResetPasswordDialog(e):Vt.shouldDisplayWelcomeDialog()?Vt.showWelcomeDialog():void 0}})),Vt});var je=a(16537),Ke=a(60950),Je=a(17840);const ze=(0,i.Og)([v.Np],e=>({getTpaHandlers(){const t=async(t,a,i)=>{const o=await e.getMemberDetails(!0);return o?i.appClientSpecMapData?.isWixTPA?{attributes:{firstName:o.firstName??"",lastName:o.lastName??"",privacyStatus:o.profilePrivacyStatus},name:o.memberName,email:o.loginEmail,id:o.id,owner:o.owner,status:o.status}:{id:o.id,owner:o.owner,status:o.status}:null},a=async(t,a={})=>{const{member:i}=await e.promptLogin({mode:a.mode,modal:a.modal});return{attributes:{firstName:i.firstName??"",lastName:i.lastName??"",privacyStatus:i.profilePrivacyStatus},name:i.memberName,email:i.loginEmail,id:i.id,owner:i.owner,status:i.status}};return{currentMember:t,smCurrentMember:t,logOutCurrentMember:(0,Je.V)(["site"],(t,a)=>{e.logout(a?.url)}),requestLogin:(0,Je.V)(["site"],a),smRequestLogin:(0,Je.V)(["site"],a)}}})),Ye=(0,i.Og)([v.Np,(0,i.KT)(o.Gp,v.UU),r.Ji],(e,{componentIds:t},a)=>({name:"site-members-components",pageWillMount(){const i=t.reduce((t,a)=>{const i=e.getSocialAuthComponentProps();return{...t,[a]:i}},{});a.update(i)}})),Xe=(0,i.Og)([(0,i.KT)(o.wk,v.UU)],e=>({handle:async t=>{const{shouldShowRenderingBlockingDialogs:a,showRenderingBlockingDialogs:i}=e.get();return a(t)?(i(),null):t}})),Qe=e=>{e(v.Np,je.$.AppWillMountHandler,je.$.AppDidMountHandler).to(He),e(E.po.BlockingDialogs).to(Xe)},Ze=e=>{e(Ke.dQ).to(ze),e(je.$.PageWillMountHandler).to(Ye),e(je.$.PageWillUnmountHandler).to((0,i.Og)([v.Np],e=>({pageWillUnmount:t=>e.pageWillUnmount(t)})))}}}]);
//# sourceMappingURL=https://static.parastorage.com/services/wix-thunderbolt/dist/group_9.f49678d1.chunk.min.js.map